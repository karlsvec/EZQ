# How to use this config file, in 3 easy steps:
# 1. To add a new launch TYPE, add an entry with a new name under the ami_map
#    section. Reference the appropriate AMI. The TYPE is really just a label
#    for associating a group of settings. You can have two TYPEs that are
#    exactly the same except for one minor detail in the userdata (for example).
# 2. Fill out any required overrides for a launch type in the security,
#    launch_settings, and userdata sections. Use the same type name as in step
#    one if you're setting up a new type.
# 3. There are really only two steps.

# Map type labels to specific AMIs. New types can be added by adding a
# new label and AMI in this section
ami_map:
  # Windows
  worker:         'ami-45f4ef2c'
  worker_Purdue:  'ami-45f4ef2c'
  #worker_ISA:     'ami-45f4ef2c'
  worker_ISA:      'ami-12ac657a'
  worker_ISU:     'ami-45f4ef2c'
  worker_mmp:     'ami-0a47bc62'
  pregrid:        'ami-45f4ef2c'
  pregrid_Purdue: 'ami-45f4ef2c'
  pregrid_ISA:    'ami-12ac657a'
  pregrid_ISU:    'ami-45f4ef2c'
  # Linux
  reporthandler:  'ami-3229cb5a'
  errorhandler:   'ami-3229cb5a'


# Security-related settings for instances. The settings in 'base' will be merged
# with any settings specified on a per-type basis, with the per-type settings
# taking precedence. All available options appear in the base section.
security:
  base:
    vpc_id: 'vpc-e894b787'
    vpc_subnet: 'subnet-fc94b793'
    # If you override this on a per-type basis, be aware that the *values* in
    # the array will not be merged. You must override the entire array.
    security_groups: ['dev-base','dev-kibitz-worker']

  errorhandler:
    security_groups: ['dev-base','dev-kibitz-worker','dev-dashboard']

# The base settings get merged with any per-type settings. All available options
# appear in the base section.
launch_settings:
  base:
    size: 't1.micro'
    count: 1
    
  #worker:
  #  size: 'c3.8xlarge'
  pregrid:
    size: 'm3.medium'
  
  pregrid_ISA:
    size: 'm3.medium'
  
  pregrid_Purdue:
    size: 'm3.medium'

  pregrid_ISU:
    size: 'm3.medium'
    
  worker_Purdue: 
    size: 'c3.8xlarge'

  worker_ISA:
    size: 'r3.4xlarge'

  worker_ISU:
    size: 'm1.xlarge'

  worker_mmp:
    size: 'm3.medium'

# The information in this section is used to populate the userdata on
# an instance prior to launch. The base section is merged with all launch types.
# Since the userdata is very flexible, NOT ALL POSSIBLE SETTINGS APPEAR IN THE
# BASE SECTION. Any boolean, numeric, or string value can be specified in
# the per-type userdata sections.
userdata:
  base:
    deploy_bucket: 6k_test.praxik
    # The gdb file to use
    gdb_bucket: 6k_test.praxik
    man_bucket: 6k_test.praxik
    r2_man_bucket: 6k_test.praxik
    
    
  worker:
    deploy_key: arks/default/worker.zip
    
  worker_ISA:
    deploy_key: arks/default/worker_x64.zip
    number_of_processes: 8 
    gdb_key: iowammp.gdb.zip
    gdb_install_name: iowammp.gdb
    man_key: ISA_weps.zip
    r2_man_key: ISA_skels.zip

  worker_ISU:
    deploy_key: arks/default/worker.zip
    number_of_processes: 4 
    gdb_key: iowammp.gdb.zip
    gdb_install_name: iowammp.gdb
    man_key: ISU_Marcus_weps.zip
    r2_man_key: ISU_Marcus_skels.zip
    
  worker_Purdue:
    deploy_key: arks/purdue/worker.zip
    number_of_processes: 44 
    gdb_key: tyner.gdb.zip
    gdb_install_name: tyner.gdb
    man_key: WEPS_Purdue.zip
    r2_man_key: R2_Purdue.zip

  worker_mmp:
    deploy_key: arks/default/iowammp.zip
    number_of_processes: 2
    db_ip: web-development-mmp360-persistence.csr7bxits1yb.us-east-1.rds.amazonaws.com
    db_port: 5432
    db_user_name: iowammp
    db_password: 1234
    db_name: iowammp_web_development_reports
    geoserver_ip: 10.1.2.8
    geoserver_port: 5432
    s3_bucket: web_development

  pregrid:
    deploy_key: arks/default/pregrid.zip
 
  pregrid_ISA:
    deploy_key: arks/default/pregrid_x64.zip
    gdb_key: iowammp.gdb.zip
    gdb_install_name: iowammp.gdb
    man_key: ISA_weps.zip
    r2_man_key: ISA_skels.zip

  pregrid_ISU:
    deploy_key: arks/default/pregrid.zip
    gdb_key: iowammp.gdb.zip
    gdb_install_name: iowammp.gdb
    man_key: ISU_Marcus_weps.zip
    r2_man_key: ISU_Marcus_skels.zip

  pregrid_Purdue:
    deploy_key: arks/purdue/pregrid.zip
    gdb_key: tyner.gdb.zip
    gdb_install_name: tyner.gdb
    man_key: WEPS_Purdue.zip
    r2_man_key: R2_Purdue.zip

  reporthandler:
    deploy_key: arks/default/reporthandler.zip

  errorhandler:
    deploy_key: arks/default/errorhandler.zip
